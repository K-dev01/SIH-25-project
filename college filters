import React from "react";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Button } from "@/components/ui/button";
import { Checkbox } from "@/components/ui/checkbox";
import { Filter, RotateCcw } from "lucide-react";

const INDIAN_STATES = [
  "Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh",
  "Goa", "Gujarat", "Haryana", "Himachal Pradesh", "Jammu and Kashmir",
  "Jharkhand", "Karnataka", "Kerala", "Madhya Pradesh", "Maharashtra",
  "Manipur", "Meghalaya", "Mizoram", "Nagaland", "Odisha", "Punjab",
  "Rajasthan", "Sikkim", "Tamil Nadu", "Telangana", "Tripura",
  "Uttar Pradesh", "Uttarakhand", "West Bengal", "Delhi"
];

const FACILITY_OPTIONS = [
  { id: "hostel", label: "Hostel" },
  { id: "library", label: "Library" },
  { id: "labs", label: "Laboratories" },
  { id: "internet", label: "Internet" },
  { id: "canteen", label: "Canteen" },
  { id: "sports", label: "Sports Facilities" }
];

export default function CollegeFilters({ filters, onFilterChange }) {
  const handleFilterChange = (key, value) => {
    onFilterChange(prev => ({ ...prev, [key]: value }));
  };

  const handleFacilityChange = (facilityId, checked) => {
    onFilterChange(prev => ({
      ...prev,
      facilities: checked 
        ? [...prev.facilities, facilityId]
        : prev.facilities.filter(f => f !== facilityId)
    }));
  };

  const resetFilters = () => {
    onFilterChange({ 
      state: "all", 
      type: "all", 
      courses: "all", 
      facilities: [], 
      feeRange: "all" 
    });
  };

  return (
    <div className="space-y-4">
      <div className="flex flex-wrap gap-4 items-center">
        <div className="flex items-center gap-2">
          <Filter className="h-4 w-4 text-gray-500" />
          <span className="text-sm font-medium text-gray-700">Filters:</span>
        </div>

        <Select value={filters.state} onValueChange={(value) => handleFilterChange("state", value)}>
          <SelectTrigger className="w-48">
            <SelectValue placeholder="All States" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All States</SelectItem>
            {INDIAN_STATES.map(state => (
              <SelectItem key={state} value={state}>{state}</SelectItem>
            ))}
          </SelectContent>
        </Select>

        <Select value={filters.type} onValueChange={(value) => handleFilterChange("type", value)}>
          <SelectTrigger className="w-40">
            <SelectValue placeholder="All Types" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Types</SelectItem>
            <SelectItem value="government">Government</SelectItem>
            <SelectItem value="aided">Government Aided</SelectItem>
            <SelectItem value="deemed">Deemed University</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filters.courses} onValueChange={(value) => handleFilterChange("courses", value)}>
          <SelectTrigger className="w-40">
            <SelectValue placeholder="All Courses" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Courses</SelectItem>
            <SelectItem value="B.Tech">Engineering</SelectItem>
            <SelectItem value="MBBS">Medical</SelectItem>
            <SelectItem value="B.Sc">Science</SelectItem>
            <SelectItem value="B.A">Arts</SelectItem>
            <SelectItem value="B.Com">Commerce</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filters.feeRange} onValueChange={(value) => handleFilterChange("feeRange", value)}>
          <SelectTrigger className="w-40">
            <SelectValue placeholder="Fee Range" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">Any Fees</SelectItem>
            <SelectItem value="0-50000">Under ₹50,000</SelectItem>
            <SelectItem value="50000-100000">₹50K - ₹1L</SelectItem>
            <SelectItem value="100000-200000">₹1L - ₹2L</SelectItem>
            <SelectItem value="200000-500000">₹2L - ₹5L</SelectItem>
          </SelectContent>
        </Select>

        <Button variant="outline" size="sm" onClick={resetFilters}>
          <RotateCcw className="h-4 w-4 mr-2" />
          Reset
        </Button>
      </div>

      {/* Facilities Filter */}
      <div>
        <p className="text-sm font-medium text-gray-700 mb-2">Required Facilities:</p>
        <div className="flex flex-wrap gap-4">
          {FACILITY_OPTIONS.map(facility => (
            <div key={facility.id} className="flex items-center space-x-2">
              <Checkbox
                id={facility.id}
                checked={filters.facilities.includes(facility.id)}
                onCheckedChange={(checked) => handleFacilityChange(facility.id, checked)}
              />
              <label
                htmlFor={facility.id}
                className="text-sm font-medium text-gray-700 cursor-pointer"
              >
                {facility.label}
              </label>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}
